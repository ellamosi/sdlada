with "sdlada.gpr";

project Tests is
   for Source_Dirs use ("../../test");
   for Object_Dir  use "gen/" & SDLAda.Mode & "/test/.obj";
   for Exec_Dir    use "gen/" & SDLAda.Mode & "/test";
   for Main        use ("test.adb", "version.adb", "platform.adb", "error.adb", "libraries.adb", "clipboard.adb",
                        "stream.adb", "stream2.adb", "surface.adb", "rwops.adb", "timers.adb", "create_window.adb",
                        "mouse.adb", "audio.adb",

                        --  For SDL.Image.
                        "load_surface.adb",

                        --  For SDL.TTF.
                        "ttf.adb");

   package Compiler renames SDLAda.Compiler;

   Platform : SDLAda.Platform_Type := SDLAda.Platform;

   package Linker is
      Switches := ("-lSDL2", "-lSDL2_ttf", "-lSDL2_image");

      --  These flags require checking on all platforms as they're taken directly from sdl2-config.
      case Platform is
         when "linux" | "bsd" | "android" | "windows" =>
            Switches := Switches & ("-L/usr/lib");

         when "macos" =>
            Switches := Switches & ("-L/usr/local/lib");

         when others =>
            null;
      end case;

      for Default_Switches ("Ada") use Switches;
   end Linker;
end Tests;
